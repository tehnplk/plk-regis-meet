module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},59354,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(12894);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/database");if(!a.ok)throw Error("Failed to load tables");let b=await a.json();e(b.tables??[]),i(null)}catch(a){console.error(a),i("ไม่สามารถโหลดรายการตารางได้")}finally{g(!1)}})()},[]);let r=async a=>{k(a),m(null),q(null),o(!0);try{let b=await fetch(`/api/database/${a}`);if(!b.ok){404===b.status?q("ไม่พบตารางที่เลือก"):q("ไม่สามารถโหลดข้อมูลตารางได้"),m([]);return}let c=await b.json();m(c.rows??[])}catch(a){console.error(a),q("ไม่สามารถโหลดข้อมูลตารางได้"),m([])}finally{o(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 font-sans text-gray-900",children:[(0,b.jsx)(d.Header,{}),(0,b.jsxs)("main",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Database Viewer"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"หน้านี้ใช้สำหรับดูข้อมูลตัวอย่างแบบ SELECT * จากทุกตารางในฐานข้อมูล (SQLite)."})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[f&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"กำลังโหลดรายการตาราง..."}),!f&&h&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:h}),!f&&!h&&(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase text-gray-500",children:[(0,b.jsx)("th",{className:"px-3 py-2",children:"ลำดับ"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"table_name"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"record"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right",children:"view"})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[a.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-blue-50/40",children:[(0,b.jsx)("td",{className:"px-3 py-2",children:c+1}),(0,b.jsx)("td",{className:"px-3 py-2 font-mono text-xs",children:a.name}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.count}),(0,b.jsx)("td",{className:"px-3 py-2 text-right",children:(0,b.jsx)("button",{type:"button",onClick:()=>r(a.name),className:"px-3 py-1 text-xs rounded-lg border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:"view"})})]},a.name)),0===a.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-3 py-4 text-center text-gray-500 text-sm",children:"ไม่พบตารางในฐานข้อมูล"})})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ข้อมูลตาราง"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"เลือกตารางจากด้านบนแล้วกดปุ่ม view เพื่อดูข้อมูล"})]}),(()=>{let a;if(!j)return null;if(n)a=(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["กำลังโหลดข้อมูลจากตาราง ",j,"..."]});else if(p)a=(0,b.jsx)("p",{className:"text-sm text-red-600",children:p});else if(l&&0!==l.length){let c=Object.keys(l[0]);a=(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200 text-sm text-gray-700 font-medium",children:["SELECT * FROM ",j," (สูงสุด 200 แถว)"]}),(0,b.jsx)("div",{className:"overflow-auto",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase text-gray-500",children:c.map(a=>(0,b.jsx)("th",{className:"px-3 py-2 whitespace-nowrap",children:a},a))})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:l.map((a,d)=>(0,b.jsx)("tr",{className:"hover:bg-blue-50/40",children:c.map(c=>{let d=a[c],e=null===d||["string","number","boolean"].includes(typeof d);return(0,b.jsx)("td",{className:"px-3 py-2 align-top",children:(0,b.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap break-all",children:e?String(d??""):JSON.stringify(d)})},c)})},d))})]})})]})}else a=(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"ไม่พบข้อมูลในตารางนี้"});return(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-stretch md:items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full h-full md:h-[90vh] md:w-[90vw] rounded-none md:rounded-2xl shadow-xl flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Table"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:j})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{k(null),m(null),q(null)},className:"px-3 py-1.5 text-xs rounded-lg border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:"ปิด"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-4",children:a})]})})})()]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__85404aca._.js.map