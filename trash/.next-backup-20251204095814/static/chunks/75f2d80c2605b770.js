(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66286,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18439);function l(){let[e,l]=(0,t.useState)([]),[r,d]=(0,t.useState)(!0),[c,x]=(0,t.useState)(null),[i,n]=(0,t.useState)(null),[o,h]=(0,t.useState)(null),[m,p]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/database");if(!e.ok)throw Error("Failed to load tables");let s=await e.json();l(s.tables??[]),x(null)}catch(e){console.error(e),x("ไม่สามารถโหลดรายการตารางได้")}finally{d(!1)}})()},[]);let u=async e=>{n(e),h(null),y(null),p(!0);try{let s=await fetch(`/api/database/${e}`);if(!s.ok){404===s.status?y("ไม่พบตารางที่เลือก"):y("ไม่สามารถโหลดข้อมูลตารางได้"),h([]);return}let t=await s.json();h(t.rows??[])}catch(e){console.error(e),y("ไม่สามารถโหลดข้อมูลตารางได้"),h([])}finally{p(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 font-sans text-gray-900",children:[(0,s.jsx)(a.Header,{}),(0,s.jsxs)("main",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Database Viewer"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"หน้านี้ใช้สำหรับดูข้อมูลตัวอย่างแบบ SELECT * จากทุกตารางในฐานข้อมูล (SQLite)."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"กำลังโหลดรายการตาราง..."}),!r&&c&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:c}),!r&&!c&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase text-gray-500",children:[(0,s.jsx)("th",{className:"px-3 py-2",children:"ลำดับ"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"table_name"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"record"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"view"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[e.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-blue-50/40",children:[(0,s.jsx)("td",{className:"px-3 py-2",children:t+1}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-xs",children:e.name}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.count}),(0,s.jsx)("td",{className:"px-3 py-2 text-right",children:(0,s.jsx)("button",{type:"button",onClick:()=>u(e.name),className:"px-3 py-1 text-xs rounded-lg border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:"view"})})]},e.name)),0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"px-3 py-4 text-center text-gray-500 text-sm",children:"ไม่พบตารางในฐานข้อมูล"})})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ข้อมูลตาราง"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"เลือกตารางจากด้านบนแล้วกดปุ่ม view เพื่อดูข้อมูล"})]}),(()=>{let e;if(!i)return null;if(m)e=(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["กำลังโหลดข้อมูลจากตาราง ",i,"..."]});else if(b)e=(0,s.jsx)("p",{className:"text-sm text-red-600",children:b});else if(o&&0!==o.length){let t=Object.keys(o[0]);e=(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200 text-sm text-gray-700 font-medium",children:["SELECT * FROM ",i," (สูงสุด 200 แถว)"]}),(0,s.jsx)("div",{className:"overflow-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase text-gray-500",children:t.map(e=>(0,s.jsx)("th",{className:"px-3 py-2 whitespace-nowrap",children:e},e))})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:o.map((e,a)=>(0,s.jsx)("tr",{className:"hover:bg-blue-50/40",children:t.map(t=>{let a=e[t],l=null===a||["string","number","boolean"].includes(typeof a);return(0,s.jsx)("td",{className:"px-3 py-2 align-top",children:(0,s.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap break-all",children:l?String(a??""):JSON.stringify(a)})},t)})},a))})]})})]})}else e=(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"ไม่พบข้อมูลในตารางนี้"});return(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-stretch md:items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white w-full h-full md:h-[90vh] md:w-[90vw] rounded-none md:rounded-2xl shadow-xl flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Table"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:i})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{n(null),h(null),y(null)},className:"px-3 py-1.5 text-xs rounded-lg border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:"ปิด"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-4",children:e})]})})})()]})]})}e.s(["default",()=>l])}]);