{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma?: PrismaClient;\r\n};\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: ['error', 'warn'],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  globalForPrisma.prisma = prisma;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth from 'next-auth';\nimport CredentialsProvider from 'next-auth/providers/credentials';\nimport { PrismaAdapter } from '@next-auth/prisma-adapter';\nimport { prisma } from '@/lib/prisma';\nimport type { NextAuthOptions } from 'next-auth';\nimport { compare } from 'bcryptjs';\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    CredentialsProvider({\n      name: 'Credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: { email: credentials.email },\n        });\n\n        if (!user || !user.password) {\n          return null;\n        }\n\n        const isValid = await compare(credentials.password, user.password);\n        if (!isValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email ?? undefined,\n          name: user.name ?? undefined,\n        };\n      },\n    }),\n  ],\n  session: {\n    strategy: 'jwt',\n  },\n};\n\nconst handler = NextAuth(authOptions);\n\nexport { handler as GET, handler as POST };\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,uLAAa,EAAC,gIAAM;IAC7B,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,YAAY,QAAQ,EAAE;oBAChD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAC;gBACpC;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBAC3B,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,IAAA,8IAAO,EAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;gBACjE,IAAI,CAAC,SAAS;oBACZ,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK,IAAI;oBACrB,MAAM,KAAK,IAAI,IAAI;gBACrB;YACF;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;AACF;AAEA,MAAM,UAAU,IAAA,kJAAQ,EAAC"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/app/api/events/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '../auth/[...nextauth]/route';\n\nexport async function GET() {\n  try {\n    const events = await prisma.event.findMany({\n      orderBy: { id: 'asc' },\n    });\n\n    return NextResponse.json({ events });\n  } catch (error) {\n    console.error(error);\n    return new NextResponse('Internal Server Error', { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  const session = await getServerSession(authOptions);\n\n  if (!session) {\n    return new NextResponse('Unauthorized', { status: 401 });\n  }\n\n  let body: unknown;\n\n  try {\n    body = await request.json();\n  } catch {\n    return new NextResponse('Invalid JSON', { status: 400 });\n  }\n\n  if (!body || typeof body !== 'object') {\n    return new NextResponse('Invalid payload', { status: 400 });\n  }\n\n  const { title, date, endDate, time, location, capacity, description, status } = body as {\n    title?: string;\n    date?: string;\n    endDate?: string | null;\n    time?: string;\n    location?: string;\n    capacity?: number | string;\n    description?: string;\n    status?: string;\n  };\n\n  const numericCapacity =\n    typeof capacity === 'string' ? Number(capacity) : capacity;\n\n  if (\n    !title ||\n    !date ||\n    !time ||\n    !location ||\n    numericCapacity == null ||\n    Number.isNaN(numericCapacity) ||\n    !description\n  ) {\n    return new NextResponse('Missing required fields', { status: 400 });\n  }\n\n  const eventStatus = status && typeof status === 'string' ? status : 'scheduled';\n\n  try {\n    const event = await prisma.event.create({\n      data: {\n        title,\n        date,\n        endDate: endDate ?? null,\n        time,\n        location,\n        registered: 0,\n        capacity: numericCapacity,\n        status: eventStatus,\n        description,\n      },\n    });\n\n    return NextResponse.json({ event }, { status: 201 });\n  } catch (error) {\n    console.error(error);\n    return new NextResponse('Internal Server Error', { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,gIAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;YACzC,SAAS;gBAAE,IAAI;YAAM;QACvB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAO;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,UAAU,MAAM,IAAA,2JAAgB,EAAC,yKAAW;IAElD,IAAI,CAAC,SAAS;QACZ,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;IACxD;IAEA,IAAI;IAEJ,IAAI;QACF,OAAO,MAAM,QAAQ,IAAI;IAC3B,EAAE,OAAM;QACN,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;IACxD;IAEA,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;QACrC,OAAO,IAAI,gJAAY,CAAC,mBAAmB;YAAE,QAAQ;QAAI;IAC3D;IAEA,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG;IAWhF,MAAM,kBACJ,OAAO,aAAa,WAAW,OAAO,YAAY;IAEpD,IACE,CAAC,SACD,CAAC,QACD,CAAC,QACD,CAAC,YACD,mBAAmB,QACnB,OAAO,KAAK,CAAC,oBACb,CAAC,aACD;QACA,OAAO,IAAI,gJAAY,CAAC,2BAA2B;YAAE,QAAQ;QAAI;IACnE;IAEA,MAAM,cAAc,UAAU,OAAO,WAAW,WAAW,SAAS;IAEpE,IAAI;QACF,MAAM,QAAQ,MAAM,gIAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACtC,MAAM;gBACJ;gBACA;gBACA,SAAS,WAAW;gBACpB;gBACA;gBACA,YAAY;gBACZ,UAAU;gBACV,QAAQ;gBACR;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAM,GAAG;YAAE,QAAQ;QAAI;IACpD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}