{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma?: PrismaClient;\r\n};\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: ['error', 'warn'],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  globalForPrisma.prisma = prisma;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/app/api/database/%5Btable%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\ninterface Params {\n  table: string;\n}\n\nexport async function GET(_req: Request, { params }: { params: Promise<Params> }) {\n  const resolvedParams = await params;\n  const table = resolvedParams.table;\n\n  if (!table) {\n    return new NextResponse('Table name is required', { status: 400 });\n  }\n\n  try {\n    // ตรวจสอบว่าตารางนี้มีอยู่จริง และไม่ใช่ตารางระบบ\n    const existing = await prisma.$queryRaw<\n      { name: string }[]\n    >`SELECT name FROM sqlite_schema WHERE type = 'table' AND name = ${table} AND name NOT LIKE 'sqlite_%'`;\n\n    if (!existing.length) {\n      return new NextResponse('Table not found', { status: 404 });\n    }\n\n    // ดึงข้อมูลทั้งหมด (limit 200 แค่เพื่อไม่ให้หนักเกินไป)\n    const rows = await prisma.$queryRawUnsafe<any[]>(\n      `SELECT * FROM \"${table}\" LIMIT 200`,\n    );\n\n    return NextResponse.json({ table, rows });\n  } catch (error) {\n    console.error(error);\n    return new NextResponse('Internal Server Error', { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,eAAe,IAAI,IAAa,EAAE,EAAE,MAAM,EAA+B;IAC9E,MAAM,iBAAiB,MAAM;IAC7B,MAAM,QAAQ,eAAe,KAAK;IAElC,IAAI,CAAC,OAAO;QACV,OAAO,IAAI,gJAAY,CAAC,0BAA0B;YAAE,QAAQ;QAAI;IAClE;IAEA,IAAI;QACF,kDAAkD;QAClD,MAAM,WAAW,MAAM,gIAAM,CAAC,SAAS,AAEtC,CAAC,+DAA+D,EAAE,MAAM,6BAA6B,CAAC;QAEvG,IAAI,CAAC,SAAS,MAAM,EAAE;YACpB,OAAO,IAAI,gJAAY,CAAC,mBAAmB;gBAAE,QAAQ;YAAI;QAC3D;QAEA,wDAAwD;QACxD,MAAM,OAAO,MAAM,gIAAM,CAAC,eAAe,CACvC,CAAC,eAAe,EAAE,MAAM,WAAW,CAAC;QAGtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;YAAO;QAAK;IACzC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}