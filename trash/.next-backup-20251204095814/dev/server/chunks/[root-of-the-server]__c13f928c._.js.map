{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/authConfig.ts"],"sourcesContent":["import NextAuth, { type Session, type NextAuthConfig } from \"next-auth\";\r\nimport type { JWT } from \"next-auth/jwt\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\n\r\nconst authOptions: NextAuthConfig = {\r\n  session: {\r\n    strategy: 'jwt',\r\n    maxAge: 60 * 60 * 25, // 25 hours\r\n  },\r\n  providers: [\r\n    CredentialsProvider({\r\n      async authorize(credentials) {\r\n        console.log(\"credentials = \", credentials);\r\n        if (credentials['cred-way'] == 'user-pass') {\r\n          // ยังไม่เชื่อมต่อฐานข้อมูลจริง: ให้ login แบบ user-pass ไม่สำเร็จไปก่อน\r\n          /*\r\n           NOTE: โค้ด prisma ด้านล่างถูก comment ไว้ เพื่อให้ build ผ่าน\r\n           แต่ยังเก็บเป็นตัวอย่างเผื่อเชื่อมฐานข้อมูลภายหลัง\r\n\r\n           const user = await prisma.user.findUnique({\r\n             where: {\r\n               username: credentials?.username as string,\r\n             },\r\n           });\r\n           if (!user) {\r\n             return null; // ทำให้ auth fail และ redirect กลับหน้า sign-in\r\n           }\r\n           return {\r\n             name: user.username,\r\n             profile: JSON.stringify(user),\r\n             ssj_department: (user as any).ssj_department,\r\n           };\r\n          */\r\n\r\n          return null; // จะทำให้ authentication fail และ redirect กลับหน้า sign-in\r\n        }\r\n        return {\r\n          name: 'provider-id',\r\n          profile: credentials.profile!\r\n        };\r\n      }\r\n    })\r\n  ],\r\n  callbacks: {\r\n    async jwt({ token, user }: { token: JWT; user?: any }) {\r\n      if (user) {      \r\n        token.profile = (user as any).profile;      \r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }: { session: Session; token: JWT }) {\r\n      if (token && session.user) {\r\n        (session.user as any).profile = (token as any).profile; // Add user profile to the session\r\n      }\r\n      return session;\r\n    },\r\n  },\r\n}\r\n\r\nexport const {\r\n  handlers,\r\n  auth,\r\n  signIn,\r\n  signOut,\r\n} = NextAuth(authOptions);"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;AAAA;;;AAEA,MAAM,cAA8B;IAClC,SAAS;QACP,UAAU;QACV,QAAQ,KAAK,KAAK;IACpB;IACA,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM,WAAU,WAAW;gBACzB,QAAQ,GAAG,CAAC,kBAAkB;gBAC9B,IAAI,WAAW,CAAC,WAAW,IAAI,aAAa;oBAC1C,wEAAwE;oBACxE;;;;;;;;;;;;;;;;;UAiBA,GAEA,OAAO,MAAM,4DAA4D;gBAC3E;gBACA,OAAO;oBACL,MAAM;oBACN,SAAS,YAAY,OAAO;gBAC9B;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAA8B;YACnD,IAAI,MAAM;gBACR,MAAM,OAAO,GAAG,AAAC,KAAa,OAAO;YACvC;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAoC;YAChE,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACxB,QAAQ,IAAI,CAAS,OAAO,GAAG,AAAC,MAAc,OAAO,EAAE,kCAAkC;YAC5F;YACA,OAAO;QACT;IACF;AACF;AAEO,MAAM,EACX,QAAQ,EACR,IAAI,EACJ,MAAM,EACN,OAAO,EACR,GAAG,IAAA,gKAAQ,EAAC"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///E:/NextJS/plk-regis-meet/src/proxy.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { auth } from \"@/authConfig\";\n\nexport default auth((req) => {\n  // If no session → redirect to /login (with callbackUrl)\n  if (!req.auth) {\n    const callbackUrl = `${req.nextUrl.pathname}${req.nextUrl.search}`;\n    const loginUrl = new URL(\"/login\", req.nextUrl.origin);\n    if (callbackUrl) {\n      loginUrl.searchParams.set(\"callbackUrl\", callbackUrl);\n    }\n    return NextResponse.redirect(loginUrl);\n  }\n  // If session exists → allow access\n  return NextResponse.next();\n});\n\nexport const config = {\n  matcher: [\"/create-event/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;uCAEe,IAAA,yHAAI,EAAC,CAAC;IACnB,wDAAwD;IACxD,IAAI,CAAC,IAAI,IAAI,EAAE;QACb,MAAM,cAAc,GAAG,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE;QAClE,MAAM,WAAW,IAAI,IAAI,UAAU,IAAI,OAAO,CAAC,MAAM;QACrD,IAAI,aAAa;YACf,SAAS,YAAY,CAAC,GAAG,CAAC,eAAe;QAC3C;QACA,OAAO,8IAAY,CAAC,QAAQ,CAAC;IAC/B;IACA,mCAAmC;IACnC,OAAO,8IAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAuB;AACnC"}}]
}